<?xml version="1.0" encoding="UTF-8"?>

<databaseChangeLog xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
                   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                   xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
         http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-2.0.xsd">

    <changeSet id="production" author="alex">
        <preConditions onFail="MARK_RAN">
            <not>
                <tableExists tableName="expression_result"/>
            </not>
        </preConditions>
        <sql>
            CREATE COLUMN TABLE i516445.expression_result
            (
            id BIGINT NOT NULL PRIMARY KEY GENERATED BY DEFAULT AS IDENTITY,
            expression VARCHAR(50) ,
            evaluation DOUBLE ,
            error VARCHAR(200)
            );
        </sql>
    </changeSet>

    <changeSet id="test" author="alex" >
        <preConditions onFail="MARK_RAN">
            <dbms type="derby"/>
        </preConditions>
        <sql>
            create table expression_result (
            id bigint generated by default as identity,
            error varchar(255),
            evaluation double,
            expression varchar(255),
            primary key (id)
            )
        </sql>
    </changeSet>

    <changeSet id="changing name of column" author="alex">
        <renameColumn tableName="expression_result" oldColumnName="evaluations" newColumnName="evaluation" columnDataType="double"/>
    </changeSet>

</databaseChangeLog>

